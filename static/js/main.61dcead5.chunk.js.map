{"version":3,"sources":["demo/components/SentryBoundary.js","demo/components/Highlight.js","lib/components/TableWrapper.js","lib/api/createTablesPlugin.js","demo/components/DemoEditor.js","demo/components/App.js","index.js"],"names":["SentryBoundary","Component","constructor","props","super","this","state","error","componentDidCatch","errorInfo","isRavenAvailable","window","Raven","setState","captureException","extra","render","children","className","type","onClick","lastEventId","showReportDialog","href","target","rel","style","textDecoration","location","reload","onCopy","value","hidden","document","createElement","body","appendChild","select","execCommand","removeChild","Highlight","position","bind","right","TableWrapper","tables","tablesCount","React","Children","forEach","child","block","getDepth","column","row","Math","floor","map","rows","i","key","j","cell","s","blockRenderMap","DefaultDraftBlockRenderMap","clear","set","element","wrapper","createTablesPlugin","DemoEditor","rawContentState","initialState","useMemo","createEditorStateFromRaw","tablesPlugin","useState","editorState","setEditorState","onChange","inlineStyles","INLINE_STYLE","BOLD","blockTypes","BLOCK_TYPE","UNORDERED_LIST_ITEM","plugins","JSON","stringify","serialiseEditorStateToRaw","demoContent","blocks","text","depth","inlineStyleRanges","entityRanges","data","offset","length","entityMap","App","mount","getElementById","ReactDOM"],"mappings":"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","file":"static/js/main.61dcead5.chunk.js","sourcesContent":["// @flow\nimport React, { Component } from \"react\";\nimport type { Node } from \"react\";\n\ntype Props = {\n  children: Node,\n};\n\ntype State = {\n  error: ?Error,\n};\n\nclass SentryBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { error: null };\n  }\n\n  componentDidCatch(error: Error, errorInfo: { componentStack: string }) {\n    const isRavenAvailable = !!window.Raven;\n    this.setState({ error });\n\n    if (isRavenAvailable) {\n      window.Raven.captureException(error, { extra: errorInfo });\n    }\n  }\n\n  render() {\n    const { children } = this.props;\n    const { error } = this.state;\n    const isRavenAvailable = !!window.Raven;\n\n    return error ? (\n      <div className=\"DraftEditor-root\">\n        <div className=\"DraftEditor-editorContainer\">\n          <div className=\"public-DraftEditor-content\">\n            {/* <img src={oops} /> */}\n            <div className=\"u-text-center\">\n              <p>Oops. The editor just crashed.</p>\n              <p>\n                Our team has been notified. You can provide us with more\n                information if you want to.\n              </p>\n              <div>\n                {isRavenAvailable ? (\n                  <button\n                    type=\"button\"\n                    onClick={() =>\n                      window.Raven.lastEventId() &&\n                      window.Raven.showReportDialog()\n                    }\n                  >\n                    Submit a report\n                  </button>\n                ) : (\n                  <a\n                    href=\"https://github.com/thibaudcolas/draftail-tables/issues\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    style={{\n                      textDecoration: \"underline\",\n                    }}\n                  >\n                    Open a GitHub issue\n                  </a>\n                )}\n                <span>&nbsp;</span>\n                <button\n                  type=\"button\"\n                  onClick={() => window.location.reload(false)}\n                >\n                  Reload the page\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ) : (\n      children\n    );\n  }\n}\n\nexport default SentryBoundary;\n","// @flow\nimport React from \"react\";\n\nconst onCopy = (value: string) => {\n  const hidden = document.createElement(\"textarea\");\n  hidden.value = value;\n\n  // $FlowFixMe\n  document.body.appendChild(hidden);\n  hidden.select();\n  document.execCommand(\"copy\");\n  // $FlowFixMe\n  document.body.removeChild(hidden);\n};\n\nconst Highlight = ({ value }: { value: string }) => (\n  <pre style={{ position: \"relative\" }}>\n    <button\n      onClick={onCopy.bind(null, value)}\n      style={{ position: \"absolute\", right: \"1rem\" }}\n    >\n      Copy\n    </button>\n    <code>{value}</code>\n  </pre>\n);\n\nexport default Highlight;\n","// @flow\nimport React from \"react\";\nimport type { Node } from \"react\";\n\ntype Props = {|\n  children: Node,\n|};\n\nconst TableWrapper = ({ children }: Props) => {\n  const tables = [];\n  let tablesCount = -1;\n\n  React.Children.forEach(children, (child) => {\n    const { block } = child.props.children.props;\n    if (block.getDepth() === 0) {\n      tablesCount += 1;\n    }\n\n    const column = block.getDepth() % 100;\n    const row = Math.floor(block.getDepth() / 100);\n\n    if (!tables[tablesCount]) {\n      tables[tablesCount] = [];\n    }\n    if (!tables[tablesCount][row]) {\n      tables[tablesCount][row] = [];\n    }\n\n    tables[tablesCount][row][column] = child;\n  });\n\n  return (\n    <div className=\"DraftailTables-TableWrapper\">\n      {tables.map((rows, i) => (\n        <div key={i} className=\"DraftailTables-TableWrapper__table\">\n          {rows.map((row, j) => (\n            <div key={row[0].key} className=\"DraftailTables-TableWrapper__tr\">\n              {row.map((cell, s) => (\n                <div key={cell.key} className=\"DraftailTables-TableWrapper__td\">\n                  {cell}\n                </div>\n              ))}\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default TableWrapper;\n","// @flow\nimport React from \"react\";\nimport { DefaultDraftBlockRenderMap } from \"draft-js\";\n\nimport TableWrapper from \"../components/TableWrapper\";\n\nconst blockRenderMap = DefaultDraftBlockRenderMap.clear().set(\"table-cell\", {\n  element: \"div\",\n  // $FlowFixMe\n  wrapper: <TableWrapper />,\n});\n\nconst createTablesPlugin = () => {\n  return {\n    blockRenderMap,\n  };\n};\n\nexport default createTablesPlugin;\n","// @flow\nimport React, { useState, useMemo } from \"react\";\nimport type { RawDraftContentState } from \"draft-js/lib/RawDraftContentState\";\n// flowlint untyped-import:off\nimport {\n  DraftailEditor,\n  createEditorStateFromRaw,\n  serialiseEditorStateToRaw,\n  INLINE_STYLE,\n  BLOCK_TYPE,\n} from \"draftail\";\n// flowlint untyped-import:error\n\nimport SentryBoundary from \"./SentryBoundary\";\nimport Highlight from \"./Highlight\";\n\nimport \"./DemoEditor.scss\";\nimport \"draft-js/dist/Draft.css\";\nimport \"draftail/dist/draftail.css\";\n\nimport { createTablesPlugin } from \"../../lib/index\";\n\ntype Props = {\n  rawContentState: null | RawDraftContentState,\n};\n\n/**\n * Demo editor.\n */\nconst DemoEditor = ({ rawContentState }: Props) => {\n  const initialState = useMemo(\n    () => createEditorStateFromRaw(rawContentState),\n    [rawContentState],\n  );\n  const tablesPlugin = useMemo(() => createTablesPlugin(), []);\n  const [editorState, setEditorState] = useState(initialState);\n  return (\n    <div className=\"DemoEditor\">\n      <SentryBoundary>\n        <DraftailEditor\n          editorState={editorState}\n          onChange={setEditorState}\n          inlineStyles={[{ type: INLINE_STYLE.BOLD }]}\n          blockTypes={[{ type: BLOCK_TYPE.UNORDERED_LIST_ITEM }]}\n          plugins={[tablesPlugin]}\n        />\n      </SentryBoundary>\n      <details>\n        <summary>\n          <span className=\"link\">Debug</span>\n        </summary>\n        <Highlight\n          value={JSON.stringify(\n            serialiseEditorStateToRaw(editorState),\n            null,\n            2,\n          )}\n        />\n      </details>\n    </div>\n  );\n};\n\nexport default DemoEditor;\n","// @flow\nimport React, { Component } from \"react\";\n\nimport DemoEditor from \"../components/DemoEditor\";\n\nimport \"./App.scss\";\n\nconst demoContent = {\n  blocks: [\n    {\n      key: \"99qpo\",\n      text: \"\",\n      type: \"unstyled\",\n      depth: 0,\n      inlineStyleRanges: [],\n      entityRanges: [],\n      data: {},\n    },\n    {\n      key: \"54qpo\",\n      text: \"Hello, World!\",\n      type: \"table-cell\",\n      depth: 0,\n      inlineStyleRanges: [\n        {\n          offset: 7,\n          length: 5,\n          style: \"BOLD\",\n        },\n      ],\n      entityRanges: [],\n      data: {},\n    },\n    {\n      key: \"ci9rr\",\n      text: \"\",\n      type: \"table-cell\",\n      depth: 1,\n      inlineStyleRanges: [],\n      entityRanges: [],\n      data: {},\n    },\n    {\n      key: \"a0781\",\n      text: \"\",\n      type: \"table-cell\",\n      depth: 100,\n      inlineStyleRanges: [],\n      entityRanges: [],\n      data: {},\n    },\n    {\n      key: \"bv3e3\",\n      text: \"This is an example of a table\",\n      type: \"table-cell\",\n      depth: 101,\n      inlineStyleRanges: [],\n      entityRanges: [],\n      data: {},\n    },\n    {\n      key: \"dc2in\",\n      text: \"\",\n      type: \"table-cell\",\n      depth: 200,\n      inlineStyleRanges: [],\n      entityRanges: [],\n      data: {},\n    },\n    {\n      key: \"a6pf1\",\n      text: \"It kind of works\",\n      type: \"table-cell\",\n      depth: 201,\n      inlineStyleRanges: [\n        {\n          offset: 3,\n          length: 7,\n          style: \"BOLD\",\n        },\n      ],\n      entityRanges: [],\n      data: {},\n    },\n    {\n      key: \"99aaa\",\n      text: \"\",\n      type: \"unstyled\",\n      depth: 0,\n      inlineStyleRanges: [],\n      entityRanges: [],\n      data: {},\n    },\n  ],\n  entityMap: {},\n};\n\nclass App extends Component<{}> {\n  render() {\n    return (\n      <div className=\"App\">\n        <DemoEditor rawContentState={demoContent} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// @flow\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./demo/utils/elements.scss\";\nimport \"./demo/utils/typography.scss\";\nimport \"./demo/utils/layout.scss\";\nimport \"./demo/utils/objects.scss\";\n\nimport \"./demo/components/header.scss\";\nimport \"./demo/components/page-nav.scss\";\n\nimport \"./demo/utils/utilities.scss\";\n\nimport \"./lib/index.scss\";\n\nimport App from \"./demo/components/App\";\n\nconst mount = document.getElementById(\"root\");\n\nif (mount) {\n  ReactDOM.render(<App />, mount);\n}\n"],"sourceRoot":""}